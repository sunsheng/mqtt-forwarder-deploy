FROM python:3.12-slim

# 安装依赖
RUN pip install paho-mqtt

# 创建工作目录
WORKDIR /tests

# 复制测试文件
COPY performance_test.py .
COPY run_tests.sh .
COPY *.json .

# 设置执行权限
RUN chmod +x run_tests.sh

# 创建结果目录
RUN mkdir -p results

# 默认运行性能测试
CMD ["python3", "performance_test.py"]
