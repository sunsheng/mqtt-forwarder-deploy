version: '3.8'

services:
  mqtt-forwarder:
    image: ghcr.io/sunsheng/mqtt-forwarder-deploy/mqtt-forwarder:latest
    container_name: mqtt-forwarder
    restart: unless-stopped
    network_mode: host
    environment:
      - UPSTREAM_BROKER=192.168.4.112    # 上游MQTT Broker（数据源）
      - DOWNSTREAM_BROKER=192.168.6.10   # 下游MQTT Broker（数据目标）
      - MQTT_PORT=1883
      - TOPIC_PROPERTY_EVENT=/ge/web/#
      - TOPIC_COMMAND=/gc/web/#
      - LOG_LEVEL=INFO
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
